文件：PwrManager.c 编译器版本 HGASM 0202 页次1


   1  0000              ; Generated by holtek-gcc v3.19, Fri Nov 11 18:10:32 2022
   2  0000              ; 
   3  0000              ; Configuration:
   4  0000              ;       with long instruction
   5  0000              ;       Multi-ROM, Multi-RAM
   6  0000              ;       bits_per_rom_unit:16
   7  0000              ;       with mp1
   8  0000              ;       with tbhp, address(0x9)
   9  0000              ;          Use tabrd-const
  10  0000              ;       
  11  0000              ; SFR address of long-instruction arch:
  12  0000              ;    mp0 = -1,1,0
  13  0000              ;    mp1 = 4,3,2
  14  0000              ;    mp2 = 14,13,12
  15  0000              ;    tbp = 9,7,8
  16  0000              ;    acc = 5
  17  0000              ;    pcl = 6
  18  0000              ;    status = 10
  19  0000              ;    bp = 11
  20  0000              ;    intc = 67
  21  0000              ;       
  22  0000              ;       
  23  0000              ; use 'tabrdc' instead of 'tabrd'
  24  0000              ;       
  25  0000              
  26  0000              #pragma translator "holtek-gcc 4.6.4" "3.19" "build 20130711"
  27  0000              ; Rebuild 718
  28  0000              
  29  0000              ir equ [2]
  30  0000              mp equ [3]
  31  0000              sbp equ [4]
  32  0000              acc equ [5]
  33  0000              bp equ [11]
  34  0000              tblp equ [7]
  35  0000              tbhp equ [9]
  36  0000              status equ [10]
  37  0000              c equ [10].0
  38  0000              ac equ [10].1
  39  0000              z equ [10].2
  40  0000              ov equ [10].3
  41  0000              cz equ [10].6
  42  0000              sc equ [10].7
  43  0000              intc equ [67]
  44  0000              
  45  0000              extern ra:byte
  46  0000              extern rb:byte
  47  0000              extern rc:byte
  48  0000              extern rd:byte
  49  0000              extern re:byte
  50  0000              extern rf:byte
  51  0000              extern rg:byte
  52  0000              extern rh:byte
  53  0000              extern _Crom2Prom:near
  54  0000              extern _Crom2PromNext:near
  55  0000              
  56  0000              RAMBANK 0 @BITDATASEC, @BITDATASEC1
  57  0000              @HCCINIT	.section 'data'
  58  0000              @HCCINIT0	.section 'data'
  59  0000              @BITDATASEC	 .section 'data'
文件：PwrManager.ASM 编译器版本 HGASM 0202 页次2

  60  0000              @BITDATASEC1	 .section 'data'
  61  0000              
  62  0000              #pragma debug scope 1 1
  63  0000              	extern __DELAY3:near
  64  0000              	extern __DELAYX3:near
  65  0000              	extern __DELAYX6:near
  66  0000              	extern __DELAYY5:near
  67  0000              	extern __DELAYY3:near
  68  0000              	extern _builtin_holtek_delay_2:byte
  69  0000              public _PwrInit
  70  0000              #pragma debug scope 2 1

  32  0000              #line 32 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  32  0000              _PwrInit .section 'code'
  32  0000              _PwrInit proc
  32  0000  0002[           local _PwrInit_2 db 2 dup(?)	; 0,2
            00
            ]
  33  0002              #line 33 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  33  0000  1F00     R  	clr _PwrAO[8]
  34  0001              #line 34 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  34  0001  1F00     R  	clr _PwrAO[9]
  35  0002              #line 35 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  35  0002  1F00     R  	clr _PwrAO[10]
  36  0003              #line 36 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  36  0003  1F00     R  	clr _PwrAO[11]
  38  0004              #line 38 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  38  0004  0F03        	mov a,3
  38  0005              	fcall _E2promRead
  38  000C  0080     E  	mov ra,a
  39  000D              #line 39 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  39  000D  0700     E  	mov a,ra
  39  000E  0080     R  	mov _PwrInit_2[1],a
  39  000F  1F00     R  	clr _PwrInit_2[0]
  39  0010  0700     R  	mov a,_PwrInit_2[0]
  39  0011  0080     R  	mov _PwrAO[2],a
  39  0012  0700     R  	mov a,_PwrInit_2[1]
  39  0013  0080     R  	mov _PwrAO[3],a
  40  0014              #line 40 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  40  0014  0F04        	mov a,4
  40  0015              	fcall _E2promRead
  40  001C  0080     E  	mov ra,a
  40  001D  0700     R  	mov a,_PwrInit_2[1]
  40  001E  0080     R  	mov _PwrAO[3],a
  40  001F  0700     E  	mov a,ra
  40  0020  0500     R  	or a,_PwrInit_2[0]
  40  0021  0080     R  	mov _PwrAO[2],a
  40  0022  0003        	ret
  40  0023              _PwrInit endp
  40  0023              #line 40 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  40  0023              #pragma debug scope 1 1
  40  0023              ___scc equ [16]
  40  0023              ___pa equ [20]
  40  0023              public _EnteryLowPower
  40  0023              #pragma debug scope 3 1
  50  0023              #line 50 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  50  0000              _EnteryLowPower .section 'code'
  50  0000              _EnteryLowPower proc
  52  0000              #line 52 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  52  0000  3490        	clr [16].1
文件：PwrManager.c 编译器版本 HGASM 0202 页次3

  55  0001              #line 55 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  55  0001  3010        	set [16].0
  55  0002              _L8:
  62  0002              #line 62 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  62  0002              ;# 62 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  62  0002  0001        	clr wdt
  63  0003              #line 63 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  63  0003              ;# 63 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  63  0003  0002        	halt
  66  0004              #line 66 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  66  0004  3E14        	sz [20].4
  66  0005  2800     R  	jmp _L3
  66  0006              _L6:
  83  0006              #line 83 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  83  0006  1F00     R  	clr _PwrAO[11]
  85  0007              #line 85 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  85  0007  3A14        	snz [20].4
  85  0008  2800     R  	jmp _L2
  87  0009              #line 87 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  87  0009  0F02        	mov a,2
  87  000A  0080     E  	mov _SysteSetSig_2[0],a
  87  000B  1F00     E  	clr _SysteSetSig_2[1]
  87  000C              	fcall _SysteSetSig
  87  0013  2800     R  	jmp _L2
  87  0014              _L3:
  66  0014              #line 66 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  66  0014  3814        	snz [20].0
  66  0015  2800     R  	jmp _L6
  75  0016              #line 75 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  75  0016  3C94        	sz [20].1
  75  0017  2800     R  	jmp _L7
  77  0018              #line 77 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  77  0018  0F09        	mov a,9
  77  0019  0080     R  	mov _PwrAO[11],a
  78  001A              #line 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF 2000>263690
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	ERRMESSAGE 'the value 2000of the argument exceeds the maxinum 263690'
  78  001A              	ENDIF
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF 2000<0
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	ERRMESSAGE 'the value 2000 of the argument exceeds the mininum 0'
  78  001A              	ENDIF
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF 2000==0
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	JMP $
  78  001A              	ENDIF
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF (2000>=1) AND (2000<( 4 + __PBP__ * 2))
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	NOP
  78  001A              	ENDIF
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF (2000>=2) AND (2000<( 4 + __PBP__ * 2))
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	NOP
  78  001A              	ENDIF
文件：PwrManager.c 编译器版本 HGASM 0202 页次4

  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF (2000>=3) AND (2000<( 4 + __PBP__ * 2))
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	NOP
  78  001A              	ENDIF
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF (2000>=4) AND (2000<( 4 + __PBP__ * 2)) AND ( __PBP__ > 0 )
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	NOP
  78  001A              	ENDIF
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF (2000>=5) AND (2000<( 4 + __PBP__ * 2)) AND ( __PBP__ > 0 )
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	NOP
  78  001A              	ENDIF
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF (2000>=6) AND (2000<( 4 + __PBP__ * 2))  AND ( __PBP__ > 1 )
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	NOP
  78  001A              	ENDIF
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF (2000>=7) AND (2000<( 4 + __PBP__ * 2))  AND ( __PBP__ > 1 )
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	NOP
  78  001A              	ENDIF
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF (2000>=8) AND (2000<( 4 + __PBP__ * 2))  AND ( __PBP__ > 2 )
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	NOP
  78  001A              	ENDIF
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF (2000==9)  AND ( __PBP__ > 2 )
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	NOP
  78  001A              	ENDIF
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF (2000< ( 8 + __PBP__ * 2)) AND (2000>( 3 + __PBP__ * 2))
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	fcall __DELAY3 + ( 7 + __PBP__ * 2) -2000
  78  001A              	ENDIF
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF (2000< ( 0404h + __PBP__ * 2)) AND (2000>( 7 + __PBP__ * 2))
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	MOV A,(2000-( 4 + __PBP__ * 2))/4
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	fcall __DELAYX3 + 3 -((2000-( 4 + __PBP__ * 2)) MOD 4) 
  78  001A              	ENDIF
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF (2000< ( 040bh + __PBP__ * 2)) AND (2000> ( 0403h + __PBP__ * 2))
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	MOV A,0 
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	fcall __DELAYX6 + ( 040ah + __PBP__ * 2) -2000
  78  001A              	ENDIF
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF (2000 >= ( 040bh + __PBP__ * 2)) AND ((((2000-( 9 + __PBP__ * 2))%0402h)/4+1)>256)
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	MOV A,(2000-( 9 + __PBP__ * 2))/0402h
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	MOV _builtin_holtek_delay_2,A
文件：PwrManager.c 编译器版本 HGASM 0202 页次5

  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	MOV A,0
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	fcall __DELAYY5 +5- (((2000-( 9 + __PBP__ * 2))%0402h)%6) 
  78  001A              	ENDIF
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A              	IF (2000 >= ( 040bh + __PBP__ * 2)) AND ((((2000-( 9 + __PBP__ * 2))%0402h)/4+1)<=256)
  78  001A              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001A  0F01        	MOV A,(2000-( 9 + __PBP__ * 2))/0402h
  78  001B              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001B  0080     E  	MOV _builtin_holtek_delay_2,A
  78  001C              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001C  0FF1        	MOV A,((2000-( 9 + __PBP__ * 2))%0402h)/4+1
  78  001D              ;# 78 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c" 1
  78  001D              	fcall __DELAYY3 +3-(((2000-( 9 + __PBP__ * 2))%0402h)%4) 
  78  0024              	ENDIF
  78  0024              _L7:
  82  0024              #line 82 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  82  0024  0700     R  	mov a,_PwrAO[11]
  82  0025  0080     E  	mov ra,a
  82  0026  1400     E  	inca ra
  82  0027  0080     R  	mov _PwrAO[11],a
  82  0028  0F08        	mov a,8
  82  0029  0200     E  	sub a,ra
  82  002A  3C0A        	sz c
  82  002B  2800     R  	jmp _L8
  82  002C  2800     R  	jmp _L6
  82  002D              _L2:
  82  002D  0003        	ret
  82  002E              _EnteryLowPower endp
  82  002E              #line 82 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  82  002E              #pragma debug scope 1 1
  82  002E              public _GetVddVol
  82  002E              #pragma debug scope 4 1
 103  002E              #line 103 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 103  0000              _GetVddVol .section 'code'
 103  0000              _GetVddVol proc
 103  0000              public _GetVddVol_2
 103  0000  0002[           local _GetVddVol_2 db 2 dup(?)	; 2,0
            00
            ]
 103  0002              #pragma debug variable 10 4 _GetVddVol_2+0 "VbgRef"
 109  0002              #line 109 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 109  0000  1F00     E  	clr _builtin_holtek_udivmodsi4_2[12]
 109  0001  0F00        	mov a,0  
 109  0002  0080     E  	mov _builtin_holtek_udivmodsi4_2[0],a  
 109  0003  0F00        	mov a,0  
 109  0004  0080     E  	mov _builtin_holtek_udivmodsi4_2[1],a
 109  0005  0F4B        	mov a,75  
 109  0006  0080     E  	mov _builtin_holtek_udivmodsi4_2[2],a  
 109  0007  0F00        	mov a,0  
 109  0008  0080     E  	mov _builtin_holtek_udivmodsi4_2[3],a
 109  0009  0700     R  	mov a,_GetVddVol_2[0]  
 109  000A  0080     E  	mov _builtin_holtek_udivmodsi4_2[4],a  
 109  000B  0700     R  	mov a,_GetVddVol_2[1]  
 109  000C  0080     E  	mov _builtin_holtek_udivmodsi4_2[5],a
 109  000D  1F00     E  	clr _builtin_holtek_udivmodsi4_2[6]
 109  000E  1F00     E  	clr _builtin_holtek_udivmodsi4_2[7]
 109  000F              	fcall _builtin_holtek_udivmodsi4
 109  0016  0700     E  	mov a,_builtin_holtek_udivmodsi4_2[0]  
文件：PwrManager.c 编译器版本 HGASM 0202 页次6

 109  0017  0080     E  	mov ra,a  
 109  0018  0700     E  	mov a,_builtin_holtek_udivmodsi4_2[1]  
 109  0019  0080     E  	mov rb,a
 109  001A  0700     E  	mov a,_builtin_holtek_udivmodsi4_2[2]  
 109  001B  0080     E  	mov rc,a  
 109  001C  0700     E  	mov a,_builtin_holtek_udivmodsi4_2[3]  
 109  001D  0080     E  	mov rd,a
 109  001E  0003        	ret
 109  001F              _GetVddVol endp
 109  001F              #line 109 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 109  001F              #pragma debug scope 1 1
 109  001F              public _GetVddVolIndex
 109  001F              #pragma debug scope 5 1
 115  001F              #line 115 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 115  0000              _GetVddVolIndex .section 'code'
 115  0000              _GetVddVolIndex proc
 115  0000              public _GetVddVolIndex_2
 115  0000  0002[           local _GetVddVolIndex_2 db 2 dup(?)	; 2,0
            00
            ]
 115  0002              #pragma debug variable 10 5 _GetVddVolIndex_2+0 "VolSample"
 119  0002              #line 119 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 119  0000  0FB7        	mov a,183
 119  0001  0200     R  	sub a,_GetVddVolIndex_2[0]
 119  0002  0F0B        	mov a,11
 119  0003  1200     R  	sbc a,_GetVddVolIndex_2[1]
 119  0004  380A        	snz c
 119  0005  2800     R  	jmp _L17
 119  0006              #line 119 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 119  0006  0F53        	mov a,83
 119  0007  0200     R  	sub a,_GetVddVolIndex_2[0]
 119  0008  0F0B        	mov a,11
 119  0009  1200     R  	sbc a,_GetVddVolIndex_2[1]
 119  000A  380A        	snz c
 119  000B  2800     R  	jmp _L18
 119  000C  0FEF        	mov a,239
 119  000D  0200     R  	sub a,_GetVddVolIndex_2[0]
 119  000E  0F0A        	mov a,10
 119  000F  1200     R  	sbc a,_GetVddVolIndex_2[1]
 119  0010  380A        	snz c
 119  0011  2800     R  	jmp _L19
 119  0012  0F8B        	mov a,139
 119  0013  0200     R  	sub a,_GetVddVolIndex_2[0]
 119  0014  0F0A        	mov a,10
 119  0015  1200     R  	sbc a,_GetVddVolIndex_2[1]
 119  0016  380A        	snz c
 119  0017  2800     R  	jmp _L20
 119  0018  0F27        	mov a,39
 119  0019  0200     R  	sub a,_GetVddVolIndex_2[0]
 119  001A  0F0A        	mov a,10
 119  001B  1200     R  	sbc a,_GetVddVolIndex_2[1]
 119  001C  380A        	snz c
 119  001D  2800     R  	jmp _L21
 124  001E              #line 124 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 124  001E  0F05        	mov a,5
 124  001F  0080     E  	mov ra,a
 124  0020  2800     R  	jmp _L16
 124  0021              _L17:
 116  0021              #line 116 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 116  0021  1F00     E  	clr ra
文件：PwrManager.c 编译器版本 HGASM 0202 页次7

 116  0022  2800     R  	jmp _L16
 116  0023              _L18:
 121  0023              #line 121 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 121  0023  0F01        	mov a,1
 121  0024  0080     E  	mov ra,a
 121  0025  2800     R  	jmp _L16
 121  0026              _L19:
 121  0026  0F02        	mov a,2
 121  0027  0080     E  	mov ra,a
 121  0028  2800     R  	jmp _L16
 121  0029              _L20:
 121  0029  0F03        	mov a,3
 121  002A  0080     E  	mov ra,a
 121  002B  2800     R  	jmp _L16
 121  002C              _L21:
 121  002C  0F04        	mov a,4
 121  002D  0080     E  	mov ra,a
 121  002E              _L16:
 130  002E              #line 130 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 130  002E  0700     E  	mov a,ra
 130  002F  0003        	ret
 130  0030              _GetVddVolIndex endp
 130  0030              #line 130 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 130  0030              #pragma debug scope 1 1
 130  0030              public _BatteryCheckHandle
 130  0030              #pragma debug scope 6 1
 140  0030              #line 140 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 140  0000              _BatteryCheckHandle .section 'code'
 140  0000              _BatteryCheckHandle proc
 140  0000  0003[           local _BatteryCheckHandle_2 db 3 dup(?)	; 0,3
            00
            ]
 140  0003              #pragma debug variable 10 6 _BatteryCheckHandle_2+0 "BatVol"
 151  0003              #line 151 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 151  0000  1F00     E  	clr _GetVddSample_2[0]
 151  0001  1F00     E  	clr _GetVddSample_2[1]
 151  0002              	fcall _GetVddSample
 152  0009              #line 152 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 152  0009  0700     E  	mov a,ra
 152  000A  0080     R  	mov _GetVddVol_2[0],a
 152  000B  0700     E  	mov a,rb
 152  000C  0080     R  	mov _GetVddVol_2[1],a
 152  000D              	fcall _GetVddVol
 152  0014  0700     E  	mov a,ra
 152  0015  0080     R  	mov _PwrAO[0],a
 152  0016  0700     E  	mov a,rb
 152  0017  0080     R  	mov _PwrAO[1],a
 153  0018              #line 153 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 153  0018  0700     E  	mov a,ra
 153  0019  0080     R  	mov _GetVddVolIndex_2[0],a
 153  001A  0700     E  	mov a,rb
 153  001B  0080     R  	mov _GetVddVolIndex_2[1],a
 153  001C              	fcall _GetVddVolIndex
 153  0023  0080     E  	mov ra,a
 153  0024  0700     E  	mov a,ra
 153  0025  0080     R  	mov _PwrAO[4],a
 155  0026              #line 155 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 155  0026  0F01        	mov a,1
 155  0027  0080     E  	mov _GetVddSample_2[0],a
 155  0028  1F00     E  	clr _GetVddSample_2[1]
文件：PwrManager.c 编译器版本 HGASM 0202 页次8

 155  0029              	fcall _GetVddSample
 156  0030              #line 156 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 156  0030  0700     E  	mov a,ra
 156  0031  0080     R  	mov _GetVddVol_2[0],a
 156  0032  0700     E  	mov a,rb
 156  0033  0080     R  	mov _GetVddVol_2[1],a
 156  0034              	fcall _GetVddVol
 156  003B  0700     E  	mov a,ra
 156  003C  0080     R  	mov _BatteryCheckHandle_2[0],a
 156  003D  0700     E  	mov a,rb
 156  003E  0080     R  	mov _BatteryCheckHandle_2[1],a
 166  003F              #line 166 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 166  003F  0F27        	mov a,39
 166  0040  0200     E  	sub a,ra
 166  0041  0F0A        	mov a,10
 166  0042  1200     E  	sbc a,rb
 166  0043  380A        	snz c
 166  0044  2800     R  	jmp _L24
 168  0045              #line 168 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 168  0045  1400     R  	inca _PwrAO[7]
 168  0046  0080     E  	mov ra,a
 168  0047  0700     E  	mov a,ra
 168  0048  0080     R  	mov _PwrAO[7],a
 169  0049              #line 169 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 169  0049  0F01        	mov a,1
 169  004A  0200     E  	sub a,ra
 169  004B  3C0A        	sz c
 169  004C  2800     R  	jmp _L26
 171  004D              #line 171 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 171  004D  0F01        	mov a,1
 171  004E  0080     R  	mov _PwrAO[7],a
 173  004F              #line 173 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 173  004F  0700     E  	mov a,_SysAO[7]
 173  0050  0080     E  	mov rb,a
 173  0051  0700     E  	mov a,_SysAO[8]
 173  0052  0080     E  	mov rc,a
 173  0053  0FFD        	mov a,253  
 173  0054  0680     E  	andm a,rb  
 173  0055  0FFF        	mov a,255  
 173  0056  0680     E  	andm a,rc
 173  0057  0700     E  	mov a,rc
 173  0058  0D00        	or a,0
 173  0059  0080     E  	mov _SysAO[8],a
 173  005A  0700     E  	mov a,rb
 173  005B  0D04        	or a,4
 173  005C  0080     E  	mov _SysAO[7],a
 173  005D  2800     R  	jmp _L26
 173  005E              _L24:
 176  005E              #line 176 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 176  005E  0F59        	mov a,89
 176  005F  0200     R  	sub a,_BatteryCheckHandle_2[0]
 176  0060  0F0A        	mov a,10
 176  0061  1200     R  	sbc a,_BatteryCheckHandle_2[1]
 176  0062  380A        	snz c
 176  0063  2800     R  	jmp _L27
 178  0064              #line 178 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 178  0064  1400     R  	inca _PwrAO[8]
 178  0065  0080     E  	mov ra,a
 183  0066              #line 183 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 183  0066  0F01        	mov a,1
文件：PwrManager.c 编译器版本 HGASM 0202 页次9

 183  0067  0200     E  	sub a,ra
 183  0068  380A        	snz c
 183  0069  2800     R  	jmp _L28
 178  006A              #line 178 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 178  006A  0700     E  	mov a,ra
 178  006B  0080     R  	mov _PwrAO[8],a
 178  006C  2800     R  	jmp _L29
 178  006D              _L28:
 185  006D              #line 185 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 185  006D  0F01        	mov a,1
 185  006E  0080     R  	mov _PwrAO[8],a
 186  006F              #line 186 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 186  006F  0700     E  	mov a,_SysAO[7]
 186  0070  0080     E  	mov rb,a
 186  0071  0700     E  	mov a,_SysAO[8]
 186  0072  0080     E  	mov rc,a
 186  0073  3800     E  	snz rb.1
 186  0074  2800     R  	jmp _L30
 188  0075              #line 188 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 188  0075  0700     E  	mov a,_SysAO[14]
 188  0076  0080     E  	mov rd,a
 188  0077  0700     E  	mov a,_SysAO[15]
 188  0078  0080     E  	mov re,a
 188  0079  0F94        	mov a,148
 188  007A  0200     E  	sub a,rd
 188  007B  0F11        	mov a,17
 188  007C  1200     E  	sbc a,re
 188  007D  3C0A        	sz c
 188  007E  2800     R  	jmp _L31
 190  007F              #line 190 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 190  007F  0FFD        	mov a,253  
 190  0080  0680     E  	andm a,rb  
 190  0081  0FFF        	mov a,255  
 190  0082  0680     E  	andm a,rc
 190  0083  2800     R  	jmp _L30
 190  0084              _L31:
 195  0084              #line 195 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 195  0084  0F01        	mov a,1
 195  0085  0300     E  	add a,rd
 195  0086  0080     E  	mov _SysAO[14],a
 195  0087  0F00        	mov a,0
 195  0088  1300     E  	adc a,re
 195  0089  0080     E  	mov _SysAO[15],a
 195  008A  2800     R  	jmp _L29
 195  008B              _L30:
 200  008B              #line 200 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 200  008B  0700     E  	mov a,rc
 200  008C  0D00        	or a,0
 200  008D  0080     E  	mov _SysAO[8],a
 200  008E  0700     E  	mov a,rb
 200  008F  0D01        	or a,1
 200  0090  0080     E  	mov _SysAO[7],a
 200  0091              _L29:
 203  0091              #line 203 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 203  0091  0F01        	mov a,1
 203  0092  0080     R  	mov _PwrAO[5],a
 203  0093  2800     R  	jmp _L26
 203  0094              _L27:
 207  0094              #line 207 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 207  0094  0FEF        	mov a,239
文件：PwrManager.c 编译器版本 HGASM 0202 页次10

 207  0095  0200     R  	sub a,_BatteryCheckHandle_2[0]
 207  0096  0F0A        	mov a,10
 207  0097  1200     R  	sbc a,_BatteryCheckHandle_2[1]
 207  0098  380A        	snz c
 207  0099  2800     R  	jmp _L32
 209  009A              #line 209 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 209  009A  0700     R  	mov a,_PwrAO[10]
 209  009B  0080     R  	mov _BatteryCheckHandle_2[2],a
 209  009C  0F01        	mov a,1
 209  009D  0200     R  	sub a,_BatteryCheckHandle_2[2]
 209  009E  3C0A        	sz c
 209  009F  2800     R  	jmp _L33
 211  00A0              #line 211 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 211  00A0  1F00     R  	clr _PwrAO[10]
 211  00A1  2800     R  	jmp _L34
 211  00A2              _L33:
 213  00A2              #line 213 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 213  00A2  1E00     R  	snz _BatteryCheckHandle_2[2]
 213  00A3  2800     R  	jmp _L34
 215  00A4              #line 215 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 215  00A4  0F02        	mov a,2
 215  00A5  0080     R  	mov _PwrAO[10],a
 215  00A6              _L34:
 217  00A6              #line 217 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 217  00A6  0F03        	mov a,3
 217  00A7  0080     R  	mov _PwrAO[5],a
 224  00A8              #line 224 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 224  00A8  0700     R  	mov a,_BatteryCheckHandle_2[0]
 224  00A9  0A5A        	sub a,90
 224  00AA  0700     R  	mov a,_BatteryCheckHandle_2[1]
 224  00AB  080A        	sbc a,10
 224  00AC  3F0A        	sz cz
 224  00AD  2800     R  	jmp _L26
 224  00AE  2800     R  	jmp _L35
 224  00AF              _L32:
 221  00AF              #line 221 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 221  00AF  0F04        	mov a,4
 221  00B0  0080     R  	mov _PwrAO[5],a
 221  00B1              _L35:
 226  00B1              #line 226 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 226  00B1  1F00     R  	clr _PwrAO[8]
 227  00B2              #line 227 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 227  00B2  0FFE        	mov a,254  
 227  00B3  0680     E  	andm a,_SysAO[7]  
 227  00B4  0FFF        	mov a,255  
 227  00B5  0680     E  	andm a,_SysAO[8]
 227  00B6              _L26:
 231  00B6              #line 231 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 231  00B6  0700     R  	mov a,_PwrAO[5]
 231  00B7  0080     E  	mov ra,a
 231  00B8  0700     R  	mov a,_PwrAO[6]
 231  00B9  0200     E  	sub a,ra
 231  00BA  3D0A        	sz z
 231  00BB  2800     R  	jmp _L38
 233  00BC              #line 233 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 233  00BC  0700     E  	mov a,ra
 233  00BD  0080     R  	mov _PwrAO[6],a
 235  00BE              #line 235 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 235  00BE  0700     E  	mov a,_RfAO[9]
 235  00BF  0C01        	xor a,1
文件：PwrManager.c 编译器版本 HGASM 0202 页次11

 235  00C0  0500     E  	or a,_RfAO[10]
 235  00C1  390A        	snz z
 235  00C2  2800     R  	jmp _L38
 237  00C3              #line 237 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 237  00C3  0700     E  	mov a,ra
 237  00C4  0080     E  	mov _UartSendMsg_2[3],a
 237  00C5  0F06        	mov a,6
 237  00C6  0080     E  	mov _UartSendMsg_2[2],a
 237  00C7  0F03        	mov a,3
 237  00C8  0080     E  	mov _UartSendMsg_2[0],a
 237  00C9  1F00     E  	clr _UartSendMsg_2[1]
 237  00CA              	fcall _UartSendMsg
 237  00D1              _L38:
 243  00D1              #line 243 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 243  00D1  0700     R  	mov a,_BatteryCheckHandle_2[0]
 243  00D2  0080     E  	mov ra,a
 243  00D3  0700     R  	mov a,_BatteryCheckHandle_2[1]
 243  00D4  0080     E  	mov rb,a
 243  00D5  0003        	ret
 243  00D6              _BatteryCheckHandle endp
 243  00D6              #line 243 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 243  00D6              #pragma debug scope 1 1
 243  00D6              public _BatteryCheck
 243  00D6              #pragma debug scope 7 1
 253  00D6              #line 253 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 253  0000              _BatteryCheck .section 'code'
 253  0000              _BatteryCheck proc
 254  0000              #line 254 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 254  0000  1F00     E  	clr _builtin_holtek_udivmodhi4_2[6]
 254  0001  0700     E  	mov a,_SysAO[12]  
 254  0002  0080     E  	mov _builtin_holtek_udivmodhi4_2[0],a  
 254  0003  0700     E  	mov a,_SysAO[13]  
 254  0004  0080     E  	mov _builtin_holtek_udivmodhi4_2[1],a
 254  0005  0F06        	mov a,6  
 254  0006  0080     E  	mov _builtin_holtek_udivmodhi4_2[2],a  
 254  0007  1F00     E  	clr _builtin_holtek_udivmodhi4_2[3]
 254  0008              	fcall _builtin_holtek_udivmodhi4
 254  000F  0700     E  	mov a,_builtin_holtek_udivmodhi4_2[4]  
 254  0010  0080     E  	mov rb,a  
 254  0011  0700     E  	mov a,_builtin_holtek_udivmodhi4_2[5]  
 254  0012  0080     E  	mov rc,a
 254  0013  0700     E  	mov a,rb
 254  0014  0C05        	xor a,5
 254  0015  0500     E  	or a,rc
 254  0016  390A        	snz z
 254  0017  2800     R  	jmp _L43
 256  0018              #line 256 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 256  0018              	fcall _BatteryCheckHandle
 256  001F              _L43:
 256  001F  0003        	ret
 256  0020              _BatteryCheck endp
 256  0020              #line 256 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
 256  0020              #pragma debug scope 1 1
 256  0020              public _VolTbl
 256  0000              @crom	.section 'crom'
  21  0000              #line 21 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  21  0000              @crom	.section	'crom'
  21  0000              _VolTbl:
  21  0000              #pragma debug array 42 12 6 1
  21  0000              #pragma debug array 42 12 6 1
文件：PwrManager.c 编译器版本 HGASM 0202 页次12

  21  0000              #pragma debug variable 42 1 _VolTbl "VolTbl"
  21  0000  0BB8        	dc 3000
  21  0001  0B54        	dc 2900
  21  0002  0AF0        	dc 2800
  21  0003  0A8C        	dc 2700
  21  0004  0A28        	dc 2600
  21  0005  09C4        	dc 2500
  19  0006              #line 19 "e:\x-sense_svn\xp02\xp02\src\PwrManager.c"
  19  0006              public _PwrAO
  19  0000              @HCCINIT0_PwrAO .section 'data'
  19  0000  000C[       _PwrAO	db 12 dup(0)
            00
            ]
  19  000C              #pragma debug struct_end
  19  000C              #pragma debug struct_end
  19  000C              #pragma debug variable 43 1 _PwrAO "PwrAO"
  19  000C              
  19  0000              @HCCINIT .section 'data'
  19  0000              #pragma debug struct_end
  19  0000              #pragma debug struct_end
  19  0000              #pragma debug union_end
  19  0000              #pragma debug union_end
  19  0000              #pragma debug variable 45 1 ___scc "__scc" 1
  19  0000              #pragma debug struct_end
  19  0000              #pragma debug struct_end
  19  0000              #pragma debug union_end
  19  0000              #pragma debug union_end
  19  0000              #pragma debug variable 47 1 ___pa "__pa" 1
  19  0000              
  19  0000              ; output external variables
  19  0000              extern _RfAO:byte
  19  0000              extern _SysAO:byte
  19  0000              extern _E2promRead:near
  19  0000              extern _SysteSetSig_2:byte
  19  0000              extern _SysteSetSig:near
  19  0000              extern _builtin_holtek_udivmodsi4_2:byte
  19  0000              extern _builtin_holtek_udivmodsi4:near
  19  0000              extern _GetVddSample_2:byte
  19  0000              extern _GetVddSample:near
  19  0000              extern _UartSendMsg_2:byte
  19  0000              extern _UartSendMsg:near
  19  0000              extern _builtin_holtek_udivmodhi4_2:byte
  19  0000              extern _builtin_holtek_udivmodhi4:near
  19  0000              
  19  0000              ; 
  19  0000              ; Generated by holtek-gcc v3.19, Fri Nov 11 18:10:32 2022
  19  0000              ; Rebuild 718
  19  0000              ; end of file


        0 Errors, 0